(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))m(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const E of i.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&m(E)}).observe(document,{childList:!0,subtree:!0});function a(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function m(t){if(t.ep)return;t.ep=!0;const i=a(t);fetch(t.href,i)}})();const g="/camera_para.dat",v="/pattern-marker.patt";var o,e,h,l=new THREE.WebGLRenderer({antialias:!0,alpha:!0});l.setClearColor(new THREE.Color("lightgrey"),0);l.setSize(640,480);l.domElement.style.position="absolute";l.domElement.style.top="0px";l.domElement.style.left="0px";document.body.appendChild(l.domElement);var p=[],s=new THREE.Scene,c=new THREE.Camera;s.add(c);o=new THREEx.ArToolkitSource({sourceType:"webcam",sourceWidth:window.innerWidth>window.innerHeight?640:480,sourceHeight:window.innerWidth>window.innerHeight?480:640});o.init(()=>{o.domElement.addEventListener("canplay",()=>{console.log("canplay","actual source dimensions",o.domElement.videoWidth,o.domElement.videoHeight),T()}),window.arToolkitSource=o});function T(){console.log("initARContext()"),e=new THREEx.ArToolkitContext({cameraParametersUrl:g,detectionMode:"mono_and_matrix",matrixCodeType:"3x3",patternRatio:.5}),e.init(()=>{c.projectionMatrix.copy(e.getProjectionMatrix()),e.arController.orientation=y(),e.arController.options.orientation=y(),console.log("arToolkitContext",e),window.arToolkitContext=e}),h=new THREEx.ArMarkerControls(e,c,{type:"pattern",patternUrl:v,smooth:!0,changeMatrixMode:"cameraTransformMatrix"}),console.log("ArMarkerControls",h),window.arMarkerControls=h}function y(){return o?(console.log("actual source dimensions",o.domElement.videoWidth,o.domElement.videoHeight),o.domElement.videoWidth>o.domElement.videoHeight?(console.log("source orientation","landscape"),"landscape"):(console.log("source orientation","portrait"),"portrait")):null}function R(){var r;console.log("disposeARSource()");const n=document.querySelector("#arjs-video");n&&((r=n==null?void 0:n.srcObject)==null||r.getTracks().map(a=>a.stop()),n.remove()),o=null}function C(){var n,r,a;console.log("disposeARContext()"),(r=(n=e==null?void 0:e.arController)==null?void 0:n.cameraParam)!=null&&r.dispose&&e.arController.cameraParam.dispose(),(a=e==null?void 0:e.arController)!=null&&a.dispose&&e.arController.dispose(),e=null}window.addEventListener("resize",function(){x()});function x(){o.onResizeElement(),o.copyElementSizeTo(l.domElement),window.arToolkitContext.arController!==null&&o.copyElementSizeTo(window.arToolkitContext.arController.canvas)}window.close=function(){C(),R()};p.push(function(){!e||!o||!o.ready||(e.update(o.domElement),s.visible=c.visible)});s.visible=!1;var f=new THREE.BoxGeometry(1,1,1),w=new THREE.MeshNormalMaterial({transparent:!0,opacity:.5,side:THREE.DoubleSide}),d=new THREE.Mesh(f,w);d.position.y=f.parameters.height/2;s.add(d);var f=new THREE.TorusKnotGeometry(.3,.1,64,16),w=new THREE.MeshNormalMaterial,d=new THREE.Mesh(f,w);d.position.y=.5;s.add(d);p.push(function(n){d.rotation.x+=Math.PI*n});p.push(function(){l.render(s,c)});var u=null;requestAnimationFrame(function n(r){requestAnimationFrame(n),u=u||r-1e3/60;var a=Math.min(200,r-u);u=r,p.forEach(function(m){m(a/1e3,r/1e3)})});
